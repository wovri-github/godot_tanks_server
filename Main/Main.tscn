[gd_scene load_steps=4 format=2]

[ext_resource path="res://Main/Main.gd" type="Script" id=1]
[ext_resource path="res://Main/Map.tscn" type="PackedScene" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

var player_hp = {}

func start_timer():
	$Timer.start()

func stop_timer():
	$Timer.stop()



func _on_Processing_timer_timeout():
	# [improve] Make time running according to game state (Playing/ waiting)
	var playerS_stance = get_parent().playerS_stance
	if playerS_stance.empty() == true:
		return
	playerS_stance[\"T\"] = OS.get_ticks_msec()
	# Verification
	# Anti-cheate
	Transfer.send_world_stance(playerS_stance)
"

[node name="Main" type="Node"]
script = ExtResource( 1 )

[node name="Processing_timer" type="Timer" parent="."]
wait_time = 0.05
autostart = true

[node name="Stance_process" type="Node" parent="."]
script = SubResource( 1 )

[node name="Map" parent="." instance=ExtResource( 2 )]
unique_name_in_owner = true

[connection signal="timeout" from="Processing_timer" to="Stance_process" method="_on_Processing_timer_timeout"]
[connection signal="timeout" from="Processing_timer" to="Map" method="_on_Processing_timer_timeout"]
